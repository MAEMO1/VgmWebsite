{% extends "base.html" %}

{% block title %}{{ _('Donation Settings') }} - {{ mosque.mosque_name }}{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h2>{{ _('Donation Settings for') }} {{ mosque.mosque_name }}</h2>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="donation_enabled" 
                                   name="donation_enabled" {% if mosque.donation_enabled %}checked{% endif %}>
                            <label class="form-check-label" for="donation_enabled">
                                {{ _('Enable donations for this mosque') }}
                            </label>
                        </div>

                        <div class="mb-3">
                            <label for="donation_iban" class="form-label">{{ _('IBAN Number') }}</label>
                            <input type="text" class="form-control" id="donation_iban" name="donation_iban"
                                   value="{{ mosque.donation_iban or '' }}" pattern="[A-Z]{2}[0-9]{2}[A-Z0-9]{4}[0-9]{7}([A-Z0-9]?){0,16}"
                                   placeholder="BE68 5390 0754 7034">
                            <small class="text-muted">{{ _('IBAN number for receiving donations') }}</small>
                        </div>

                        <div class="mb-3">
                            <label for="donation_description" class="form-label">{{ _('Donation Description') }}</label>
                            <textarea class="form-control" id="donation_description" name="donation_description" 
                                    rows="4">{{ mosque.donation_description or '' }}</textarea>
                            <small class="text-muted">{{ _('Explain how donations will be used') }}</small>
                        </div>

                        <div class="mb-3">
                            <label for="donation_goal" class="form-label">{{ _('Donation Goal (â‚¬)') }}</label>
                            <input type="number" step="0.01" min="0" class="form-control" id="donation_goal" 
                                   name="donation_goal" value="{{ mosque.donation_goal or '' }}">
                            <small class="text-muted">{{ _('Optional: Set a fundraising goal') }}</small>
                        </div>

                        <div class="mb-3">
                            <label for="donation_goal_description" class="form-label">{{ _('Goal Description') }}</label>
                            <textarea class="form-control" id="donation_goal_description" name="donation_goal_description" 
                                    rows="3">{{ mosque.donation_goal_description or '' }}</textarea>
                            <small class="text-muted">{{ _('Describe what the fundraising goal is for') }}</small>
                        </div>

                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> {{ _('Save Settings') }}
                            </button>
                            <a href="{{ url_for('main.mosque_detail', mosque_id=mosque.id) }}" class="btn btn-outline-secondary">
                                {{ _('Back to Mosque Page') }}
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block styles %}
<style>
.form-check {
    padding: 1rem;
    background: var(--background-light);
    border-radius: 8px;
    margin-bottom: 1.5rem;
}

.form-control:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 0.2rem rgba(65,183,172,0.25);
}
</style>
{% endblock %}