{% extends "base.html" %}

{% block title %}{{ mosque.mosque_name }} - {{ _('Mosque Details') }}{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <!-- Mosque Header -->
        <div class="col-12 mb-4">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('main.mosques') }}">{{ _('Mosques') }}</a></li>
                    <li class="breadcrumb-item active">{{ mosque.mosque_name }}</li>
                </ol>
            </nav>

            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-8">
                            <h1 class="display-4">{{ mosque.mosque_name }}</h1>
                            <p class="lead">
                                <i class="fas fa-map-marker-alt"></i> {{ mosque.get_full_address() }}
                            </p>
                            {% if mosque.mosque_phone %}
                            <p><i class="fas fa-phone"></i> {{ mosque.mosque_phone }}</p>
                            {% endif %}
                        </div>
                        <div class="col-md-4 text-end">
                            {% if current_user.is_authenticated and (current_user.is_admin or current_user.id == mosque.id) %}
                            <a href="{{ url_for('main.edit_mosque', mosque_id=mosque.id) }}" class="btn btn-primary w-100">
                                <i class="fas fa-edit"></i> {{ _('Edit Mosque Information') }}
                            </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-md-8">
            <!-- Mission & Vision -->
            {% if mosque.mission_statement or mosque.vision_statement %}
            <div class="card mb-4">
                <div class="card-header">
                    <h3>{{ _('Mission & Vision') }}</h3>
                </div>
                <div class="card-body">
                    {% if mosque.mission_statement %}
                    <h4>{{ _('Our Mission') }}</h4>
                    <p>{{ mosque.mission_statement }}</p>
                    {% endif %}

                    {% if mosque.vision_statement %}
                    <h4>{{ _('Our Vision') }}</h4>
                    <p>{{ mosque.vision_statement }}</p>
                    {% endif %}
                </div>
            </div>
            {% endif %}

            <!-- About Section -->
            <div class="card mb-4">
                <div class="card-header">
                    <h3>{{ _('About') }}</h3>
                </div>
                <div class="card-body">
                    {% if mosque.activities %}
                    <h4>{{ _('Activities') }}</h4>
                    <p>{{ mosque.activities }}</p>
                    {% endif %}

                    {% if mosque.facilities %}
                    <h4>{{ _('Facilities') }}</h4>
                    <p>{{ mosque.facilities }}</p>
                    {% endif %}

                    {% if mosque.languages %}
                    <h4>{{ _('Languages') }}</h4>
                    <p>{{ mosque.languages }}</p>
                    {% endif %}
                </div>
            </div>

            <!-- Contact Information -->
            <div class="card mb-4">
                <div class="card-header">
                    <h3>{{ _('Contact Information') }}</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            {% if mosque.mosque_email %}
                            <p><i class="fas fa-envelope"></i> <a href="mailto:{{ mosque.mosque_email }}">{{ mosque.mosque_email }}</a></p>
                            {% endif %}
                            {% if mosque.mosque_website %}
                            <p><i class="fas fa-globe"></i> <a href="{{ mosque.mosque_website }}" target="_blank">{{ mosque.mosque_website }}</a></p>
                            {% endif %}
                            {% if mosque.mosque_phone %}
                            <p><i class="fas fa-phone"></i> {{ mosque.mosque_phone }}</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="col-md-4">
            <!-- Map Card -->
            <div class="card mb-4">
                <div class="card-body">
                    <div id="mosque-map" style="height: 300px;"></div>
                </div>
            </div>

            <!-- Accessibility Features -->
            {% if mosque.accessibility_features %}
            <div class="card mb-4">
                <div class="card-header">
                    <h3>{{ _('Accessibility') }}</h3>
                </div>
                <div class="card-body">
                    <p>{{ mosque.accessibility_features }}</p>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block styles %}
<style>
.card {
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    margin-bottom: 1.5rem;
}

.card-header {
    background-color: white;
    border-bottom: 1px solid rgba(0, 0, 0, 0.125);
    padding: 1.25rem;
}

.card-header h3 {
    margin: 0;
    font-size: 1.25rem;
    color: #2C3E50;
}

.card-body {
    padding: 1.5rem;
}

.display-4 {
    font-size: 2.5rem;
    font-weight: 600;
    color: #2C3E50;
}

.lead {
    font-size: 1.2rem;
    color: #6C757D;
}

.btn-primary {
    background-color: #005A87;
    border-color: #005A87;
}

.btn-primary:hover {
    background-color: #004A6F;
    border-color: #004A6F;
}

@media (max-width: 768px) {
    .display-4 {
        font-size: 2rem;
    }

    .text-end {
        text-align: left !important;
        margin-top: 1rem;
    }
}
</style>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/maps.js') }}"></script>
<script src="https://maps.googleapis.com/maps/api/js?key={{ google_maps_api_key }}&callback=initMap" async defer></script>
{% endblock %}